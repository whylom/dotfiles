# Only proceed if an SSH public key needs to be created.
if [[ ! -e ~/.ssh/id_rsa.pub ]];
  echo "Let's generate an SSH keypair so you can access GitHub."

  read -p "Enter your email (used for the public key's comment)" comment

  # Generate a new SSH keypair.
  ssh-keygen -t rsa -b 4096 -C $comment

  # Add the private key to the ssh-agent.
  eval "$(ssh-agent -s)"
  ssh-add ~/.ssh/id_rsa

  # Copy the public key to user's clipboard.
  pbcopy < ~/.ssh/id_rsa.pub

  # Open GitHub's "SSH and GPG keys" page in the default browser
  # so the user can associate the public key with their account.
  open https://github.com/settings/keys
fi
