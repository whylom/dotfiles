# Symlink files ending in ".symlink" to home directory
# eg: `~/.dotfiles/foo.symlink` will have the symlink `~/.foo`
for original in ~/.dotfiles/*/**.symlink; do
  link=$(basename $original) # extract filename from path
  link=${link%.symlink}      # remove ".symlink"
  ln -sf $original ~/.$link
done

# Symlink folders
ln -snf ~/.dotfiles/.js ~/.js

# Make sure Homebrew is installed
if ! type brew &> /dev/null; then
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Install Homebrew packages listed in Brewfile
brew tap homebrew/bundle # first make sure `brew bundle` is available
brew bundle

# Copy our Sublime Text preferences (must be run after `brew bundle`)
cp sublime/Preferences.sublime-settings ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/User

# Install our favorite monospace font
cp fonts/DejaVuSansMono.ttf ~/Library/Fonts/DejaVuSansMono.ttf

# Install our 1-line .bash_profile
cp bash/.bash_profile ~/.bash_profile

# Configure OS X settings to be just the way we like it
echo "A password is needed to configure OS X settings"
osx/configure
